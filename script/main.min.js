!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d,e;e=function(){function a(a,b,c){this.kana_a=a,this.kana_b=b,this.result=c}return a}(),d=function(){function a(){this.list=[]}return a.prototype.push=function(a){return this.list.push(a)},a.prototype.compare=function(a,b){var c,d,e,f;for(f=this.list,d=0,e=f.length;e>d;d++)if(c=f[d],a===c.kana_a&&b===c.kana_b||a===c.kana_b&&b===c.kana_a)return c.result;return!1},a.prototype.toString=function(){var a,b,c,d,e;for(b="",e=this.list,c=0,d=e.length;d>c;c++)a=e[c],0!==b.length&&(b+=", "),b+=a.result;return b},a}(),c.KanaComparator=e,c.ComparatorList=d},{}],2:[function(a,b){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h="　",i=50,c=function(){function a(a,b,c){this.x=a,this.y=b,this.kana=c,this.completed=!1}return a.prototype.isEmpty=function(){return this.kana===h},a.prototype.complete=function(){return this.completed=!0},a.prototype.isCompleted=function(){return this.completed},a.prototype.clear=function(){return this.completed=!1,this.kana=h},a.prototype.color=function(){return this.completed?"orange":"non"},a}(),j=function(){function a(a,b){this.moved=a,this.birthWordsCount=b}return a}(),e=function(){function a(a){this.size=a}return a.prototype.push=function(a){return this.cells||(this.cells=[]),this.cells.length<this.size?this.cells.push(a):void 0},a.prototype.shiftForward=function(){var a,b,c,d,e,f,g;for(b=!1,e=0,a=f=0,g=this.size-1;g>=0?g>f:f>g;a=g>=0?++f:--f)this.cells[a].isEmpty()?this.cells[a+1].isEmpty()||(d=this.cells[a].kana,this.swap(this.cells[a],this.cells[a+1]),b=!0):(c=this.comparator.compare(this.cells[a].kana,this.cells[a+1].kana),c&&(this.cells[a].kana=c,this.cells[a].complete(),this.cells[a+1].kana=h,b=!0,e++));return new j(b,e)},a.prototype.shiftBack=function(){var a,b,c,d,e,f,g,i;for(c=!1,f=0,a=g=1,i=this.size;i>=1?i>g:g>i;a=i>=1?++g:--g)b=this.size-a,this.cells[b].isEmpty()?this.cells[b-1].isEmpty()||(e=this.cells[b].kana,this.swap(this.cells[b],this.cells[b-1]),c=!0):(d=this.comparator.compare(this.cells[b].kana,this.cells[b-1].kana),d&&(this.cells[b].kana=d,this.cells[b].complete(),this.cells[b-1].kana=h,c=!0,f++));return new j(c,f)},a.prototype.setHeadCell=function(a){return this.cells[0].kana=a},a.prototype.setTailCell=function(a){return this.cells[this.size-1].kana=a},a.prototype.swap=function(a,b){var c;return c=a.kana,a.kana=b.kana,b.kana=c,c=a.completed,a.completed=b.completed,b.completed=c},a}(),f=function(a){function b(a,c){this.size=a,this.comparator=c,b.__super__.constructor.call(this,this.size)}return l(b,a),b.prototype.shiftLeft=function(){return this.shiftForward()},b.prototype.shiftRight=function(){return this.shiftBack()},b.prototype.addLeftside=function(a){return this.setHeadCell(a)},b.prototype.addRightside=function(a){return this.setTailCell(a)},b}(e),d=function(a){function b(a,c){this.size=a,this.comparator=c,b.__super__.constructor.call(this,this.size)}return l(b,a),b.prototype.shiftUp=function(){return this.shiftForward()},b.prototype.shiftDown=function(){return this.shiftBack()},b.prototype.addUpside=function(a){return this.setHeadCell(a)},b.prototype.addDownside=function(a){return this.setTailCell(a)},b}(e),g=function(){function a(a,b,e){var g,i,j,k,l,m,n,o,p,q;for(this.size=a,this.kana=b,this.comparator=e,this.rows=[],this.cols=[],i=l=0,o=this.size;o>=0?o>l:l>o;i=o>=0?++l:--l)this.cols.push(new d(this.size,this.comparator));for(i=m=0,p=this.size;p>=0?p>m:m>p;i=p>=0?++m:--m){for(k=new f(this.size,this.comparator),j=n=0,q=this.size;q>=0?q>n:n>q;j=q>=0?++n:--n)g=new c(j,i,h),k.push(g),this.cols[j].push(g);this.rows.push(k)}this.initialize()}return a.prototype.initialize=function(){var a,b,c,d,e,f,g,h;for(this.score=0,this.completeWord=!1,e=Math.floor(this.size*this.size/3),b=0,c=0,h=[];e>b&&!(c>i);)d=Math.floor(Math.random()*this.size*this.size),f=d%this.size,g=(d-f)/this.size,a=this.rows[g].cells[f],a.isEmpty()&&(a.kana=this.getRandomKana(),b++),h.push(c++);return h},a.prototype.getRandomKana=function(){return this.kana[Math.floor(Math.random()*this.kana.length)]},a.prototype.shiftLeft=function(){var a,b,c,d,e,f,g;for(this.dropWordCell(),c=[],b=f=0,g=this.rows.length;g>=0?g>f:f>g;b=g>=0?++f:--f)e=this.rows[b],d=e.shiftLeft(),d.moved&&c.push(b),d.birthWordsCount>0&&(this.completeWord=!0,this.score+=d.birthWordsCount);return 0===c.length?!1:(a=c[Math.floor(Math.random()*c.length)],this.rows[a].addRightside(this.getRandomKana()),!0)},a.prototype.shiftRight=function(){var a,b,c,d,e,f,g;for(this.dropWordCell(),c=[],b=f=0,g=this.rows.length;g>=0?g>f:f>g;b=g>=0?++f:--f)e=this.rows[b],d=e.shiftRight(),d.moved&&c.push(b),d.birthWordsCount>0&&(this.completeWord=!0,this.score+=d.birthWordsCount);return 0===c.length?!1:(a=c[Math.floor(Math.random()*c.length)],this.rows[a].addLeftside(this.getRandomKana()),!0)},a.prototype.shiftUp=function(){var a,b,c,d,e,f,g;for(this.dropWordCell(),d=[],c=f=0,g=this.cols.length;g>=0?g>f:f>g;c=g>=0?++f:--f)b=this.cols[c],e=b.shiftUp(),e.moved&&d.push(c),e.birthWordsCount>0&&(this.completeWord=!0,this.score+=e.birthWordsCount);return 0===d.length?!1:(a=d[Math.floor(Math.random()*d.length)],this.cols[a].addDownside(this.getRandomKana()),!0)},a.prototype.shiftDown=function(){var a,b,c,d,e,f,g;for(this.dropWordCell(),d=[],c=f=0,g=this.cols.length;g>=0?g>f:f>g;c=g>=0?++f:--f)b=this.cols[c],e=b.shiftDown(),e.moved&&d.push(c),e.birthWordsCount>0&&(this.completeWord=!0,this.score+=e.birthWordsCount);return 0===d.length?!1:(a=d[Math.floor(Math.random()*d.length)],this.cols[a].addUpside(this.getRandomKana()),!0)},a.prototype.nextStepAvailable=function(){var a,b,c,d,e,f,g,h,i;if(this.completeWord)return!0;for(h=this.rows,e=0,g=h.length;g>e;e++)for(d=h[e],c=f=0,i=d.cells.length;i>=0?i>f:f>i;c=i>=0?++f:--f){if(a=d.cells[c],a.isEmpty())return!0;if(c<d.cell.length-1&&(b=d.cells[c+1],this.comparator.compare(a.kana,b.kana)))return!0}return!1},a.prototype.dropWordCell=function(){var a,b,c,d,e,f,g,h;if(this.completeWord){for(g=this.rows,c=0,e=g.length;e>c;c++)for(b=g[c],h=b.cells,d=0,f=h.length;f>d;d++)a=h[d],a.isCompleted()&&a.clear();return this.completeWord=!1}},a}(),b.exports=g},{}],3:[function(a){var b,c,d,e;d=a("./kana.coffee"),e=a("./compalator.coffee"),c=e.KanaComparator,b=e.ComparatorList,Vue.prototype.attach=function(a){return $(a).append(this.$el)},$(function(){var a,e;return a=new b,a.push(new c("に","じ","虹")),a.push(new c("し","ま","島")),e=new Vue({template:"#kotoawase-table",data:{kanaTable:new d(4,["に","じ","か","し","ま"],a),score:0,words:a.toString(),message:""},methods:{shiftUp:function(){return this.$data.kanaTable.shiftUp()||(this.$data.message=this.$data.kanaTable.nextStepAvailable()?"その方向には移動できません。":"ゲームオーバーです。"),this.$data.score=this.$data.kanaTable.score},shiftDown:function(){return this.$data.kanaTable.shiftDown()||(this.$data.message=this.$data.kanaTable.nextStepAvailable()?"その方向には移動できません。":"ゲームオーバーです。"),this.$data.score=this.$data.kanaTable.score},shiftLeft:function(){return this.$data.kanaTable.shiftLeft()||(this.$data.message=this.$data.kanaTable.nextStepAvailable()?"その方向には移動できません。":"ゲームオーバーです。"),this.$data.score=this.$data.kanaTable.score},shiftRight:function(){return this.$data.kanaTable.shiftRight()||(this.$data.message=this.$data.kanaTable.nextStepAvailable()?"その方向には移動できません。":"ゲームオーバーです。"),this.$data.score=this.$data.kanaTable.score}}}),e.attach("body")})},{"./compalator.coffee":1,"./kana.coffee":2}]},{},[3]);
//# sourceMappingURL=main.min.map